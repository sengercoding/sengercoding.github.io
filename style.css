:root {
  --bg: #0e0e0f;
  --surface: #1a1a1c;
  --surface2: #242428;
  --accent: #e8c547;
  --accent2: #e8643a;
  --text: #f0ede6;
  --muted: #6b6b72;
  --green: #4caf7d;
  --red: #e84343;
  --blue: #4a90d9;
  --purple: #9b6dff;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Mono', monospace;
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse at 20% 50%, rgba(232,197,71,0.04) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 20%, rgba(232,100,58,0.04) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

#app { position: relative; z-index: 1; }

/* ── SETUP SCREEN ── */
#setup-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  gap: 48px;
  padding: 40px;
}

.title-block { text-align: center; }

.title-block h1 {
  font-family: 'Bebas Neue', sans-serif;
  font-size: clamp(72px, 12vw, 140px);
  letter-spacing: 8px;
  line-height: 0.9;
  background: linear-gradient(135deg, var(--accent) 0%, var(--accent2) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.title-block p {
  color: var(--muted);
  font-size: 11px;
  letter-spacing: 4px;
  text-transform: uppercase;
  margin-top: 12px;
}

.setup-card {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 16px;
  padding: 40px 48px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 32px;
  width: min(400px, 100%);
}

.setup-label {
  font-size: 10px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
}

.player-counter {
  display: flex;
  align-items: center;
  gap: 24px;
}

.counter-btn {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  border: 2px solid var(--accent);
  background: transparent;
  color: var(--accent);
  font-size: 24px;
  cursor: pointer;
  transition: all 0.15s;
  font-family: 'DM Mono', monospace;
  display: flex;
  align-items: center;
  justify-content: center;
}
.counter-btn:hover { background: var(--accent); color: var(--bg); }
.counter-btn:active { transform: scale(0.92); }

.counter-value {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 72px;
  color: var(--text);
  min-width: 60px;
  text-align: center;
  line-height: 1;
}

.start-btn {
  width: 100%;
  padding: 18px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  border-radius: 10px;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 22px;
  letter-spacing: 4px;
  color: var(--bg);
  cursor: pointer;
  transition: all 0.2s;
}
.start-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(232,197,71,0.25); }
.start-btn:active { transform: translateY(0); }

/* ── GAME SCREEN ── */
#game-screen {
  display: none;
  padding: 24px;
  min-height: 100vh;
}

.game-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 32px;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.game-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 32px;
  letter-spacing: 4px;
  color: var(--accent);
}

.deck-info {
  font-size: 11px;
  color: var(--muted);
  letter-spacing: 2px;
  text-transform: uppercase;
}

.deck-counter {
  display: inline-block;
  color: var(--accent);
  font-size: 18px;
  font-family: 'Bebas Neue', sans-serif;
  margin-left: 8px;
}

.round-badge {
  font-size: 10px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  padding: 4px 10px;
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 20px;
}

/* ── MESSAGE LOG ── */
.message-log {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px;
  padding: 16px 20px;
  margin-bottom: 24px;
  max-height: 120px;
  overflow-y: auto;
}

.log-entry {
  font-size: 12px;
  color: var(--muted);
  padding: 3px 0;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  line-height: 1.5;
  animation: fadeIn 0.2s ease;
}
.log-entry:last-child { border-bottom: none; color: var(--text); }
.log-entry .highlight { color: var(--accent); }
.log-entry .danger    { color: var(--red); }
.log-entry .good      { color: var(--green); }

@keyframes fadeIn {
  from { opacity: 0; transform: translateX(-8px); }
  to   { opacity: 1; transform: translateX(0); }
}

/* ── ACTION SECTION ── */
.action-section {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px;
  padding: 24px 32px;
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 24px;
  flex-wrap: wrap;
}

.drawn-label {
  font-size: 10px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}

.current-player-tag {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 36px;
  letter-spacing: 3px;
  color: var(--accent);
}

.action-area {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.draw-btn {
  padding: 16px 32px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  border-radius: 10px;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 20px;
  letter-spacing: 3px;
  color: var(--bg);
  cursor: pointer;
  transition: all 0.2s;
}
.draw-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(232,197,71,0.3); }
.draw-btn:active:not(:disabled) { transform: translateY(0); }
.draw-btn:disabled { opacity: 0.3; cursor: not-allowed; }

.stop-btn {
  padding: 16px 32px;
  background: transparent;
  border: 2px solid var(--muted);
  border-radius: 10px;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 20px;
  letter-spacing: 3px;
  color: var(--muted);
  cursor: pointer;
  transition: all 0.2s;
}
.stop-btn:hover:not(:disabled) { border-color: var(--red); color: var(--red); }
.stop-btn:disabled { opacity: 0.3; cursor: not-allowed; }

/* ── PLAYERS GRID ── */
.players-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 32px;
}

.player-panel {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px;
  padding: 20px;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.player-panel.active-player {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent), 0 8px 32px rgba(232,197,71,0.12);
}

.player-panel.active-player::before {
  content: 'YOUR TURN';
  position: absolute;
  top: 12px;
  right: 12px;
  font-size: 8px;
  letter-spacing: 2px;
  color: var(--accent);
  background: rgba(232,197,71,0.1);
  padding: 3px 8px;
  border-radius: 4px;
}

.player-panel.finished {
  opacity: 0.55;
}

.player-panel-header {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 16px;
}

.player-name {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 22px;
  letter-spacing: 2px;
  color: var(--text);
}

.player-score-total {
  font-size: 12px;
  color: var(--muted);
}
.player-score-total span {
  color: var(--green);
  font-size: 16px;
}

.cards-area {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  min-height: 64px;
  padding: 10px;
  background: var(--surface2);
  border-radius: 8px;
  margin-bottom: 12px;
  align-content: flex-start;
}

/* ── CARD CHIPS ── */
.card-chip {
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  letter-spacing: 1px;
  animation: cardIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  border: 1px solid transparent;
}

@keyframes cardIn {
  from { transform: scale(0.5) rotate(-10deg); opacity: 0; }
  to   { transform: scale(1) rotate(0deg); opacity: 1; }
}

.card-standard    { background: rgba(240,237,230,0.08); border-color: rgba(240,237,230,0.12); color: var(--text); }
.card-add         { background: rgba(74,144,217,0.15);  border-color: rgba(74,144,217,0.3);   color: var(--blue); }
.card-mult        { background: rgba(155,109,255,0.15); border-color: rgba(155,109,255,0.3);  color: var(--purple); }
.card-freeze      { background: rgba(76,175,125,0.15);  border-color: rgba(76,175,125,0.3);   color: var(--green); }
.card-second_chance { background: rgba(232,197,71,0.15); border-color: rgba(232,197,71,0.3); color: var(--accent); }
.card-add_three   { background: rgba(232,100,58,0.15);  border-color: rgba(232,100,58,0.3);   color: var(--accent2); }

.round-score {
  font-size: 11px;
  color: var(--muted);
  letter-spacing: 1px;
  text-transform: uppercase;
}
.round-score span { color: var(--text); font-size: 14px; }

.player-inactive-badge {
  font-size: 10px;
  letter-spacing: 2px;
  color: var(--muted);
  text-transform: uppercase;
  padding: 4px 8px;
  border: 1px solid var(--muted);
  border-radius: 4px;
  margin-top: 10px;
  display: inline-block;
}

/* ── GAME OVER SCREEN ── */
#gameover-screen {
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  gap: 32px;
  padding: 40px;
  text-align: center;
}

.gameover-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: clamp(60px, 10vw, 120px);
  letter-spacing: 6px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.winner-name {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 36px;
  letter-spacing: 4px;
  color: var(--text);
}

.final-scores {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px;
  padding: 24px 40px;
  width: min(400px, 100%);
}

.score-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  font-size: 14px;
}
.score-row:last-child { border-bottom: none; }
.score-row .s-name { color: var(--muted); }
.score-row .s-val  { color: var(--accent); font-family: 'Bebas Neue', sans-serif; font-size: 22px; }

.restart-btn {
  padding: 18px 48px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  border-radius: 10px;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 22px;
  letter-spacing: 4px;
  color: var(--bg);
  cursor: pointer;
  transition: all 0.2s;
}
.restart-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 32px rgba(232,197,71,0.25); }

/* ── CARD REVEAL MODAL ── */
.card-reveal-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 28px;
  animation: modalIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* The card itself */
.playing-card {
  width: 220px;
  height: 320px;
  border-radius: 18px;
  background: #faf7f0;
  border: 2px solid rgba(255,255,255,0.15);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.25),
    0 24px 60px rgba(0,0,0,0.7),
    inset 0 1px 0 rgba(255,255,255,0.6);
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 14px;
  overflow: hidden;
  /* card type colours applied via JS via data-type attribute */
}

/* Subtle inner border frame */
.playing-card::before {
  content: '';
  position: absolute;
  inset: 8px;
  border-radius: 12px;
  border: 1.5px solid currentColor;
  opacity: 0.15;
  pointer-events: none;
}

/* ── Card type themes ── */
.playing-card[data-type="standard"] {
  --card-accent: #1a1a2e;
  --card-text: #1a1a2e;
  --card-bg: #faf7f0;
  --card-glow: rgba(26,26,46,0.15);
  background: var(--card-bg);
  color: var(--card-text);
}
.playing-card[data-type="add"] {
  --card-accent: #1a4fa3;
  --card-text: #1a4fa3;
  --card-bg: #eef4ff;
  --card-glow: rgba(26,79,163,0.2);
  background: var(--card-bg);
  color: var(--card-text);
}
.playing-card[data-type="mult"] {
  --card-accent: #5c27b0;
  --card-text: #5c27b0;
  --card-bg: #f4eeff;
  --card-glow: rgba(92,39,176,0.2);
  background: var(--card-bg);
  color: var(--card-text);
}
.playing-card[data-type="freeze"] {
  --card-accent: #0d7a50;
  --card-text: #0d7a50;
  --card-bg: #ebfaf3;
  --card-glow: rgba(13,122,80,0.2);
  background: var(--card-bg);
  color: var(--card-text);
}
.playing-card[data-type="second_chance"] {
  --card-accent: #a07800;
  --card-text: #a07800;
  --card-bg: #fffaeb;
  --card-glow: rgba(160,120,0,0.2);
  background: var(--card-bg);
  color: var(--card-text);
}
.playing-card[data-type="add_three"] {
  --card-accent: #b03a0d;
  --card-text: #b03a0d;
  --card-bg: #fff2ec;
  --card-glow: rgba(176,58,13,0.2);
  background: var(--card-bg);
  color: var(--card-text);
}

/* Glow ring behind card */
.playing-card::after {
  content: '';
  position: absolute;
  inset: -20px;
  border-radius: 30px;
  background: radial-gradient(ellipse at center, var(--card-glow, transparent) 0%, transparent 70%);
  z-index: -1;
  pointer-events: none;
}

/* ── Corners ── */
.card-corner {
  display: flex;
  flex-direction: column;
  align-items: center;
  line-height: 1;
  gap: 1px;
}
.card-corner--br {
  align-self: flex-end;
  transform: rotate(180deg);
}
.corner-value {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 26px;
  letter-spacing: 1px;
  color: var(--card-accent);
}
.corner-suit {
  font-size: 16px;
  color: var(--card-accent);
}

/* ── Center ── */
.card-center {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 20px;
  text-align: center;
}
.card-center-icon {
  font-size: 52px;
  line-height: 1;
  filter: drop-shadow(0 2px 6px var(--card-glow, transparent));
}
.card-center-label {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 28px;
  letter-spacing: 3px;
  color: var(--card-accent);
  margin-top: 4px;
}
.card-center-desc {
  font-family: 'DM Mono', monospace;
  font-size: 10px;
  letter-spacing: 1.5px;
  color: var(--card-accent);
  opacity: 0.6;
  text-transform: uppercase;
  max-width: 140px;
  line-height: 1.5;
}

/* Card flip-in animation */
@keyframes cardFlip {
  0%   { transform: rotateY(90deg) scale(0.8); opacity: 0; }
  60%  { transform: rotateY(-8deg) scale(1.04); opacity: 1; }
  100% { transform: rotateY(0deg) scale(1); opacity: 1; }
}
.playing-card {
  animation: cardFlip 0.45s cubic-bezier(0.22, 1, 0.36, 1) both;
}

/* Continue button */
.card-reveal-continue {
  padding: 14px 40px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border: none;
  border-radius: 10px;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 20px;
  letter-spacing: 4px;
  color: var(--bg);
  cursor: pointer;
  transition: all 0.2s;
  animation: fadeIn 0.3s 0.3s ease both;
}
.card-reveal-continue:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(232,197,71,0.3);
}
.card-reveal-continue:active { transform: translateY(0); }

/* ── TARGET SELECTION MODAL ── */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  animation: fadeIn 0.15s ease;
}

.modal-box {
  background: var(--surface);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 18px;
  padding: 36px 40px;
  width: min(480px, 100%);
  text-align: center;
  box-shadow: 0 32px 80px rgba(0,0,0,0.6);
  animation: modalIn 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes modalIn {
  from { transform: scale(0.88); opacity: 0; }
  to   { transform: scale(1);    opacity: 1; }
}

.modal-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 32px;
  letter-spacing: 4px;
  color: var(--accent);
  margin-bottom: 8px;
}

.modal-subtitle {
  font-size: 12px;
  color: var(--muted);
  letter-spacing: 2px;
  text-transform: uppercase;
  margin-bottom: 28px;
  line-height: 1.6;
}

.modal-players {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.modal-player-btn {
  width: 100%;
  padding: 14px 20px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 10px;
  font-family: 'DM Mono', monospace;
  font-size: 13px;
  letter-spacing: 2px;
  color: var(--text);
  cursor: pointer;
  transition: all 0.15s;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-player-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
  background: rgba(232,197,71,0.06);
  transform: translateX(4px);
}

.modal-player-btn .btn-score {
  font-size: 11px;
  color: var(--muted);
}

.modal-player-btn:hover .btn-score { color: var(--accent); }

.modal-player-btn.self-btn {
  border-color: rgba(232,100,58,0.3);
  color: var(--accent2);
}
.modal-player-btn.self-btn:hover {
  border-color: var(--accent2);
  background: rgba(232,100,58,0.08);
  color: var(--accent2);
}

/* ── SCROLLBAR ── */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface2); border-radius: 2px; }
